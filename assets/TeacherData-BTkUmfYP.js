import{_ as q,bI as z,aP as u,y as L,o,c as t,b as e,bC as v,bq as S,F as h,aS as _,br as H,b6 as i,bs as P,bF as Q,bH as R,s as J,aw as K,bo as C,bn as V,p as W,d as X}from"./index-DmO5tq5S.js";const d=f=>(W("data-v-bd718550"),f=f(),X(),f),Y={class:"col-12 row mb-2"},Z={class:"col-2"},ee=d(()=>e("option",{value:"all"},"所有地區",-1)),le=["value"],ae={class:"col-2"},oe=d(()=>e("option",{value:"all"},"所有課程",-1)),te=["value"],se={class:"col-4"},ne={class:"container-fluid row"},de={class:"col-8 overflow-y-auto"},ce=d(()=>e("div",{class:"btn-group","aria-label":"Region buttons",id:"regionsContainer"},null,-1)),ie={class:"container-fluid"},re={class:"col-12"},ue={class:"table table-hover"},he=["onClick"],_e={class:"col-4 overflow-y-auto",id:"teacherDetails"},ve={key:0},me=d(()=>e("h6",null,"地區:",-1)),be=d(()=>e("h6",null,"電子信箱:",-1)),pe=d(()=>e("h6",null,"出生年月:",-1)),ye=d(()=>e("h6",null,"身分證字號:",-1)),fe=d(()=>e("h6",null,"戶籍地址:",-1)),ke=d(()=>e("h6",null,"居住地址:",-1)),we=d(()=>e("h6",null,"匯款代號 / 帳號:",-1)),De=d(()=>e("h6",null,"立帳分行:",-1)),ge=d(()=>e("h6",null,"團隊名稱:",-1)),Ie=d(()=>e("h6",null,"帳戶影本:",-1)),$e=["src"],Le=d(()=>e("h6",null,"身分證正面:",-1)),Ce=["src"],Me=d(()=>e("h6",null,"身分證反面:",-1)),xe=["src"],Ae=d(()=>e("h6",null,"業務簽名:",-1)),Te=["src"],Se={key:1},Ve=d(()=>e("p",null,"請從左側列表中選擇一個教師以查看詳情。",-1)),Ue=[Ve],Fe={class:"modal fade",id:"teacherModal",tabindex:"-1","aria-hidden":"true"},Be={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},Ee={class:"modal-content"},Ge=d(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"teacherModalLabel"},"新增教師"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Oe={class:"modal-body"},je={class:"row"},Ne={class:"col-8 overflow-y-auto"},qe={class:"row"},ze={class:"col-6"},He={class:"row"},Pe={class:"col-auto"},Qe=["for"],Re={class:"col-sm-8"},Je=["type","id","placeholder","onUpdate:modelValue","readonly"],Ke={class:"col-6"},We={class:"row"},Xe={class:"col-auto"},Ye=["for"],Ze={class:"col-8"},el=["type","id","placeholder","onUpdate:modelValue","readonly"],ll=d(()=>e("label",null,"地區：",-1)),al={class:"d-flex flex-wrap"},ol=["id","value"],tl=["for"],sl=d(()=>e("label",null,"課程：",-1)),nl={class:"d-flex flex-wrap"},dl=["id","value"],cl=["for"],il={class:"col-4 overflow-y-auto"},rl=["for"],ul=["type","id","placeholder","onUpdate:modelValue","readonly"],hl=d(()=>e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1)),_l={__name:"TeacherData",setup(f){const m=z(),k=u("all"),w=u("all"),b=u(""),U=u(null),D=u([]),g=u([]),M=L(()=>m.state.data.set[0].area),x=L(()=>m.state.data.set[0].course),F=L(()=>Object.values(m.state.data.teacher).filter(a=>{const c=k.value==="all"||a.area&&a.area.includes(k.value),l=w.value==="all"||a.course&&a.course.includes(w.value),n=b.value===""||a.name&&a.name.toLowerCase().includes(b.value.toLowerCase())||a.Alias&&a.Alias.toLowerCase().includes(b.value.toLowerCase());return c&&l&&n}).map(a=>({...a,nameAlias:a.Alias?`${a.name} (${a.Alias})`:`${a.name}`,phoneLineID:a.LineID?`${a.phone} / ${a.LineID}`:`${a.phone}`}))),A=u([{key:"nameAlias",label:"姓名 (別名)",width:"15%"},{key:"pay",label:"薪資",width:"10%"},{key:"phoneLineID",label:"聯繫電話 / Line ID",width:"30%"},{key:"course",label:"教授課程",width:"45%"}]),p=u([{label:"身份 ID",model:"id",placeholder:"自動生成的ID",readonly:!0},{label:"老師姓名",model:"name",placeholder:"老師姓名"},{label:"老師綽號",model:"Alias",placeholder:"老師綽號"},{label:"出生年月",model:"birthday",placeholder:"出生年月日"},{label:"身份證號",model:"idcard",placeholder:"身分證字號"},{label:"電子信箱",model:"mail",placeholder:"老師綽號",readonly:!0},{label:"Line ID",model:"LineID",placeholder:""},{label:"老師薪資",model:"pay",placeholder:""}]),$=u([{label:"聯絡電話",model:"phone",placeholder:"聯絡電話"},{label:"戶籍地址",model:"registration_add",placeholder:"戶籍地址"},{label:"居住地址",model:"live_add",placeholder:"居住地址"},{label:"銀行代碼",model:"bank_code",placeholder:"銀行代碼"},{label:"匯款賬號",model:"bank_account",placeholder:"匯款賬號"},{label:"立帳分行",model:"bank_name",placeholder:"立帳分行"},{label:"團隊名稱",model:"team",placeholder:"個人免填"},{label:"老師權限",model:"role",placeholder:"老師綽號"}]),B=u([{label:"老師綽號",model:"綽號",placeholder:"老師綽號"}]),s=u({id:"",name:"",Alias:"",birthday:"",idcard:"",mail:"",LineID:"",pay:"",phone:"",registration_add:"",live_add:"",bank_code:"",bank_account:"",bank_name:"",team:"",role:""}),E=()=>{},r=u(null),T=a=>{r.value=a,s.value={...a},D.value=a.area||[],g.value=a.course||[]},I=u(null),G=u(!1),O=u(""),j=a=>{if(a==="edit"&&!r.value){alert("請點擊要變更老師的內容");return}O.value=a,I.value||(I.value=new R(document.getElementById("teacherModal"))),I.value.show()},N=async()=>{try{let{data:a,error:c}=await J.from("teacher").upsert({id:s.value.id,name:s.value.name,Alias:s.value.Alias,birthday:s.value.birthday,idcard:s.value.idcard,mail:s.value.mail,area:D.value,course:g.value,phone:s.value.phone,LineID:s.value.LineID,registration_add:s.value.registration_add,live_add:s.value.live_add,bank_code:s.value.bank_code,bank_account:s.value.bank_account,bank_name:s.value.bank_name,team:s.value.team,created_at:new Date().toISOString()});if(c)throw c;await m.dispatch("fetchDataFromItems",["teacher"]);const l=m.state.data.teacher[s.value.id];T(l),I.value.hide()}catch(a){console.error("保存教師數據出錯:",a),U.value=a,alert("保存教師數據出錯")}};return(a,c)=>(o(),t("div",null,[e("div",Y,[e("div",Z,[v(e("select",{class:"form-select","onUpdate:modelValue":c[0]||(c[0]=l=>k.value=l)},[ee,(o(!0),t(h,null,_(M.value,l=>(o(),t("option",{key:l,value:l},i(l),9,le))),128))],512),[[S,k.value]])]),e("div",ae,[v(e("select",{class:"form-select","onUpdate:modelValue":c[1]||(c[1]=l=>w.value=l)},[oe,(o(!0),t(h,null,_(x.value,l=>(o(),t("option",{key:l,value:l},i(l),9,te))),128))],512),[[S,w.value]])]),e("div",se,[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c[2]||(c[2]=l=>b.value=l),placeholder:"搜索教師名字或別名",onInput:c[3]||(c[3]=(...l)=>a.filterTeachers&&a.filterTeachers(...l))},null,544),[[H,b.value]])])]),e("div",ne,[e("div",de,[ce,e("div",ie,[e("div",re,[e("table",ue,[e("thead",null,[e("tr",null,[(o(!0),t(h,null,_(A.value,l=>(o(),t("th",{scope:"col",key:l.key,style:K({width:l.width})},i(l.label),5))),128))])]),e("tbody",null,[(o(!0),t(h,null,_(F.value,l=>(o(),t("tr",{key:l.id,onClick:n=>T(l)},[(o(!0),t(h,null,_(A.value,n=>(o(),t("td",{key:n.key},i(l[n.key]),1))),128))],8,he))),128))])])])])]),e("div",_e,[r.value?(o(),t("div",ve,[me,e("h4",null,i(r.value.area),1),be,e("h4",null,i(r.value.mail),1),pe,e("h4",null,i(r.value.birthday),1),ye,e("h4",null,i(r.value.idcard),1),fe,e("h4",null,i(r.value.registration_add),1),ke,e("h4",null,i(r.value.live_add),1),we,e("h4",null,i(r.value.bank_code)+" / "+i(r.value.bank_account),1),De,e("h4",null,i(r.value.bank_name),1),ge,e("h4",null,i(r.value.team),1),Ie,e("img",{src:r.value.bank_ph,class:"img-thumbnail"},null,8,$e),Le,e("img",{src:r.value.idc_ph,class:"img-thumbnail"},null,8,Ce),Me,e("img",{src:r.value.idc_ph1,class:"img-thumbnail"},null,8,xe),Ae,e("img",{src:r.value.sales_ph,class:"img-thumbnail"},null,8,Te)])):(o(),t("div",Se,Ue))]),e("button",{class:"btn btn-primary rounded-circle",style:{position:"fixed",bottom:"70px",right:"50px",width:"4rem",height:"4rem",display:"flex","justify-content":"center","align-items":"center"},onClick:c[4]||(c[4]=l=>j("edit"))})]),v(e("div",Fe,[e("div",Be,[e("div",Ee,[Ge,e("div",Oe,[e("form",{onSubmit:Q(E,["prevent"])},[e("div",je,[e("div",Ne,[e("div",qe,[e("div",ze,[(o(!0),t(h,null,_(p.value,(l,n)=>(o(),t("div",{key:`group1-${n}`,class:"mb-3"},[e("div",He,[e("div",Pe,[e("label",{for:`teacher${n}`,class:"col-form-label"},i(l.label),9,Qe)]),e("div",Re,[v(e("input",{type:l.type||"text",class:"form-control",id:`teacher${n}`,placeholder:l.placeholder,"onUpdate:modelValue":y=>s.value[l.model]=y,readonly:l.readonly||!1},null,8,Je),[[C,s.value[l.model]]])])])]))),128))]),e("div",Ke,[(o(!0),t(h,null,_($.value,(l,n)=>(o(),t("div",{key:`group2-${n}`,class:"mb-3"},[e("div",We,[e("div",Xe,[e("label",{for:`teacher${n+p.value.length}`,class:"col-form-label"},i(l.label),9,Ye)]),e("div",Ze,[v(e("input",{type:l.type||"text",class:"form-control",id:`teacher${n+p.value.length}`,placeholder:l.placeholder,"onUpdate:modelValue":y=>s.value[l.model]=y,readonly:l.readonly||!1},null,8,el),[[C,s.value[l.model]]])])])]))),128))])]),e("div",null,[ll,e("div",al,[(o(!0),t(h,null,_(M.value,l=>(o(),t("div",{key:l,class:"form-check form-check-inline"},[v(e("input",{type:"checkbox",id:`area-${l}`,class:"form-check-input","onUpdate:modelValue":c[5]||(c[5]=n=>D.value=n),value:l},null,8,ol),[[V,D.value]]),e("label",{for:`area-${l}`,class:"form-check-label"},i(l),9,tl)]))),128))])]),e("div",null,[sl,e("div",nl,[(o(!0),t(h,null,_(x.value,l=>(o(),t("div",{key:l,mclass:"form-check form-check-inline"},[v(e("input",{type:"checkbox",id:`course-${l}`,class:"form-check-input","onUpdate:modelValue":c[6]||(c[6]=n=>g.value=n),value:l},null,8,dl),[[V,g.value]]),e("label",{for:`course-${l}`,class:"form-check-label"},i(l),9,cl)]))),128))])])]),e("div",il,[(o(!0),t(h,null,_(B.value,(l,n)=>(o(),t("div",{key:`group4-${n}`,class:"mb-3"},[e("label",{for:`teacher${n+p.value.length+$.value.length}`},i(l.label),9,rl),v(e("input",{type:l.type||"text",class:"form-control",id:`teacher${n+p.value.length+$.value.length}`,placeholder:l.placeholder,"onUpdate:modelValue":y=>s.value[l.model]=y,readonly:l.readonly||!1},null,8,ul),[[C,s.value[l.model]]])]))),128))])])],32)]),e("div",{class:"modal-footer"},[hl,e("button",{type:"submit",class:"btn btn-primary",onClick:N},"保存")])])])],512),[[P,G.value]])]))}},ml=q(_l,[["__scopeId","data-v-bd718550"]]);export{ml as default};
